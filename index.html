<!DOCTYPE html>
<html>
<head>
	<title>Create Memes</title>
	<link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/app.css">
</head>
<body>
	<div class="container">
		<section>
			<form>
				<div class="row">
					<div class="col-md-12">
						<label>Link de Imagem</label>
						<input id="linkImagem" type="text" name="linkImagem" class="form-control">
					</div>
				</div>
				<button id="carregarImagem" class="btn btn-success">Carregar</button>
			</form>
		</section>
		<canvas id="c"></canvas>	
		<section>
			<form>
				<div class="row">
					<div class="col-md-12">
						<label>Frase</label>
						<input id="frase" type="text" name="frase" class="form-control">
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<label>Ponto X</label>
						<input id="x" type="number" name="x" class="form-control">
					</div>
					<div class="col-md-6">
						<label>Ponto Y</label>
						<input id="y" type="number" name="y" class="form-control">
					</div>
				</div>
				<button id="inserirFrase" class="btn btn-success">Inserir</button>
			</form>
		</section>
	</div>
	<script>
		let canvas = document.querySelector("#c");
		let context = canvas.getContext("2d");
		
		document.querySelector("#inserirFrase").addEventListener("click", function(e){
			e.preventDefault();
			createtextInImage();
		});

		document.querySelector("#carregarImagem").addEventListener("click", function(e){
			e.preventDefault();
			createImage(document.querySelector("#linkImagem").value);
		});

		//https://2.bp.blogspot.com/-3I9STecZVjA/TzG6jEfWCGI/AAAAAAAAfKQ/JSLV2yzPHJQ/s1600/VUDU.jpg
		function createImage(src){
			let image = new Image();
			image.src = src;
			image.onload = function(){
				context.drawImage(this, 0, 0, canvas.width, canvas.height);				
			}
		}

		function createtextInImage(){
			context.strokeText(document.querySelector("#frase").value, 
							document.querySelector("#x").value,
							document.querySelector("#y").value);
		}

		function saveImage(image){
			window.open(image.toDataURL());
		}
	</script>
</body>
</html>